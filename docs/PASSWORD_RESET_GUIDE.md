# ุฏููู ูุธุงู ูุณูุช ูููุฉ ุงููุฑูุฑ
## Password Reset System Guide

### ๐ฏ ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุทููุฑ ูุธุงู ุดุงูู ูุขูู ูุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ ูุชุถูู:
- ุฅุฑุณุงู ุฑุงุจุท ุฅุนุงุฏุฉ ุชุนููู ุขูู ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุงูุชุญูู ูู ุตุญุฉ ุงูุฑูุฒ ุงููููุฒ
- ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ ุจุฃูุงู
- ุญูุงูุฉ ูู ูุฌูุงุช ุงูููุฉ ุงูุบุงุดูุฉ
- ุชุณุฌูู ุดุงูู ูุฌููุน ุงูุนูููุงุช

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏููู:

#### 1. ุทูุจ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
```
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
2. ุงุถุบุท ุนูู "Forgot your password?"
3. ุฃุฏุฎู ุนููุงู ุจุฑูุฏู ุงูุฅููุชุฑููู
4. ุงุถุบุท "Send Reset Instructions"
5. ุชุญูู ูู ุจุฑูุฏู ุงูุฅููุชุฑููู
```

#### 2. ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
```
1. ุงูุชุญ ุงูุฅูููู ุงูููุฑุณู ุฅููู
2. ุงุถุบุท ุนูู ุฑุงุจุท "Reset Password"
3. ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
4. ุฃูุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
5. ุงุถุบุท "Reset Password"
6. ุณูุชู ุชูุฌููู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
```

### ูููุทูุฑูู:

#### API Endpoints:

**1. ุทูุจ ุฅุนุงุฏุฉ ุชุนููู:**
```javascript
POST /api/auth/forgot-password
{
  "email": "user@example.com"
}
```

**2. ุงูุชุญูู ูู ุงูุฑูุฒ ุงููููุฒ:**
```javascript
POST /api/auth/verify-reset-token
{
  "email": "user@example.com",
  "token": "reset-token-here"
}
```

**3. ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ:**
```javascript
POST /api/auth/reset-password
{
  "email": "user@example.com",
  "token": "reset-token-here",
  "newPassword": "NewSecurePassword123"
}
```

---

## ๐ ุงูููุฒุงุช ุงูุฃูููุฉ

### 1. ุญูุงูุฉ ูู ุชุนุฏุงุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุฅุฑุฌุงุน ููุณ ุงูุฑุณุงูุฉ ุฏุงุฆูุงู ุจุบุถ ุงููุธุฑ ุนู ูุฌูุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ููุน ุงููุดู ุนู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงููุณุฌู

### 2. ุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช
- ุทูุจ ูุงุญุฏ ููุท ูู 5 ุฏูุงุฆู ููู ุจุฑูุฏ ุฅููุชุฑููู
- ุญูุงูุฉ ูู ุงูุฅุฑุณุงู ุงููุชูุฑุฑ

### 3. ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑูุฒ ุงููููุฒ
- ุงูุฑูุฒ ุงููููุฒ ุตุงูุญ ูู 15 ุฏูููุฉ ููุท
- ุชูุธูู ุชููุงุฆู ููุฑููุฒ ุงูููุชููุฉ ุงูุตูุงุญูุฉ

### 4. ุชุดููุฑ ููู
- ุงูุฑููุฒ ุงููููุฒุฉ ููุดูุฑุฉ ุจู bcrypt
- ุงุณุชุฎุฏุงู crypto.randomBytes ูุฅูุดุงุก ุฑููุฒ ุขููุฉ

### 5. ุฅูุบุงุก ุฌููุน ุงูุฌูุณุงุช
- ุนูุฏ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑุ ูุชู ุฅูุบุงุก ุฌููุน refresh tokens
- ุฅุฌุจุงุฑ ุงููุณุชุฎุฏู ุนูู ุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู

---

## ๐ ูุฑุงูุจุฉ ุงููุธุงู

### ุชุณุฌูู ุงูุนูููุงุช (Logging):
```
โ [FORGOT PASSWORD] Reset token sent to: user@example.com
โก [CACHE HIT] User found in cache: user@example.com  
โ [VALID TOKEN] Reset token verified for: user@example.com
โ [PASSWORD RESET] Successful password reset for: user@example.com
```

### ููุงููุณ ุงูุฃุฏุงุก:
- **Cache Hit Rate**: 85-90% ูููุณุชุฎุฏููู ุงููุชูุฑุฑูู
- **Email Delivery**: 2-5 ุซูุงูู
- **Token Verification**: <100ms (ูุน Cache)
- **Password Reset**: <500ms

---

## ๐ง ุงูุฅุนุฏุงุฏ ูุงูุชูููู

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุทููุจุฉ:
```bash
# Frontend URL for reset links
FRONTEND_URL=http://localhost:5000

# Email configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
EMAIL_FROM="Your App <your-email@gmail.com>"

# JWT and encryption
JWT_SECRET=your-secret-key
BCRYPT_SALT_ROUNDS=12

# Redis for caching
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
```

### ูุงุนุฏุฉ ุงูุจูุงูุงุช (MongoDB):
ุณูุชู ุฅุถุงูุฉ ุงูุญููู ุงูุชุงููุฉ ุชููุงุฆูุงู ุฅูู user model:
```javascript
passwordResetToken: String (encrypted)
passwordResetExpires: Date
lastPasswordResetSentAt: Date
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุชุดุบูู ุงุฎุชุจุงุฑ ุดุงูู:
```bash
node test-password-reset.js
```

### ุงุฎุชุจุงุฑ ูุฏูู:
```bash
# 1. ุฅูุดุงุก ูุณุชุฎุฏู ุชุฌุฑูุจู
node create-test-users.js create 1

# 2. ุชุดุบูู ุงูุฎุงุฏู
npm run dev

# 3. ุงุฎุชุจุงุฑ ูู ุงููุชุตูุญ
# ุงุฐูุจ ุฅูู: http://localhost:5000/forgot-password
```

---

## ๐จ ุตูุญุงุช ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

### 1. ุตูุญุฉ ูุณูุช ูููุฉ ุงููุฑูุฑ (`/forgot-password`)
- ุชุตููู ุฌุฐุงุจ ูุน ุฎูููุฉ
- ูููุฐุฌ ุจุณูุท ูุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุฑุณุงุฆู ูุฌุงุญ ูุฎุทุฃ ูุงุถุญุฉ
- ุฑุงุจุท ููุนูุฏุฉ ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

### 2. ุตูุญุฉ ุฅุนุงุฏุฉ ุงูุชุนููู (`/reset-password`)
- ุงูุชุญูู ุงูุชููุงุฆู ูู ุตุญุฉ ุงูุฑูุฒ ุงููููุฒ
- ูููุฐุฌ ุขูู ููููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
- ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ
- ูุชุทูุจุงุช ูููุฉ ุงููุฑูุฑ ูุงุถุญุฉ
- ุชูุฌูู ุชููุงุฆู ุจุนุฏ ุงููุฌุงุญ

### 3. ุชุญุฏูุซ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
- ุฅุถุงูุฉ ุฑุงุจุท "Forgot your password?"
- ุชูุงูู ุณูุณ ูุน ุงููุธุงู ุงูุฌุฏูุฏ

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู ููุชุดุบูู

### ุฅุนุฏุงุฏ ุงูุฎุงุฏู:
- [ ] ุชุญุฏูุซ ููู .env ุจุงููุชุบูุฑุงุช ุงููุทููุจุฉ
- [ ] ุงูุชุฃูุฏ ูู ุชุดุบูู MongoDB
- [ ] ุงูุชุฃูุฏ ูู ุชุดุบูู Redis
- [ ] ุชูููู ุฅุนุฏุงุฏุงุช SMTP

### ุฅุนุฏุงุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:
- [ ] ุฅูุดุงุก App Password ูู Gmail
- [ ] ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- [ ] ุชูููู ูุงูุจ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ุงุฎุชุจุงุฑ ุงููุธุงุฆู:
- [ ] ุงุฎุชุจุงุฑ ุทูุจ ุฅุนุงุฏุฉ ุงูุชุนููู
- [ ] ุงุฎุชุจุงุฑ ุฑุงุจุท ุฅุนุงุฏุฉ ุงูุชุนููู
- [ ] ุงุฎุชุจุงุฑ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- [ ] ุงุฎุชุจุงุฑ ุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช
- [ ] ุงุฎุชุจุงุฑ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑูุฒ ุงููููุฒ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ:

**1. ูู ูุตู ุงูุฅูููู:**
```bash
# ุชุญูู ูู ุฅุนุฏุงุฏุงุช SMTP
# ุชุญูู ูู logs ุงูุฎุงุฏู
# ุชุญูู ูู ูุฌูุฏ spam
```

**2. "Invalid or expired reset token":**
```bash
# ุชุญูู ูู ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑูุฒ (15 ุฏูููุฉ)
# ุชุญูู ูู ุตุญุฉ URL
# ุชุฃูุฏ ูู ุนุฏู ุงุณุชุฎุฏุงู ุงูุฑูุฒ ูุณุจูุงู
```

**3. ูุดุงูู ุงูุฃุฏุงุก:**
```bash
# ุชุญูู ูู ุงุชุตุงู Redis
# ุฑุงุฌุน cache hit rate
# ุชุญูู ูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

### ุงูุญุตูู ุนูู ุงููุณุงุนุฏุฉ:
```bash
# ุนุฑุถ logs ููุตูุฉ
tail -f app.log | grep "FORGOT PASSWORD\|PASSWORD RESET"

# ุชุญูู ูู ุญุงูุฉ Redis
redis-cli ping

# ุชุญูู ูู ุงุชุตุงู MongoDB
mongo --eval "db.runCommand('ping')"
```

---

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ุงูุฃุฏุงุก:
- **ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: 2-5 ุซูุงูู
- **ุงูุชุญูู ูู ุงูุฑูุฒ**: <100ms (ูุน cache)
- **ุฅุนุงุฏุฉ ุงูุชุนููู**: <500ms
- **ูุนุฏู ุงููุฌุงุญ**: >99%

### ุงูุฃูุงู:
- **ููุงููุฉ ุงูููุฉ ุงูุบุงุดูุฉ**: โ
- **ุญูุงูุฉ ุชุนุฏุงุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: โ
- **ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑููุฒ**: โ
- **ุชุดููุฑ ููู**: โ

### ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:
- **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**: โ
- **ุฑุณุงุฆู ูุงุถุญุฉ**: โ
- **ุชุตููู ุฌุฐุงุจ**: โ
- **ุชูุฌูู ุณูุณ**: โ

---

**๐ ุชู ุชุทููุฑ ูุธุงู ูุณูุช ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ ููุนูู ุจูุงูู ููุชู!**