# ุฅุฑุดุงุฏุงุช ุงูุชุดุบูู ูุงูุงุฎุชุจุงุฑ ูููุธุงู ุงูููุญุณูู

## ๐ ููุฎุต ุงูุฃุฏุงุก ุงููุชููุน

### ุงููุธุงู ุงูุญุงูู (Single Process)
- **ุงูุญุฏ ุงูุฃูุตู ููุงุชุตุงูุงุช ุงููุชุฒุงููุฉ**: ~1,000-2,000
- **ุงุณุชููุงู ุงูุฐุงูุฑุฉ**: ~1-2MB ููู ุงุชุตุงู WebSocket
- **ูุนุฏู ุงูุฑุณุงุฆู**: ~500-1,000 ุฑุณุงูุฉ/ุซุงููุฉ

### ุงููุธุงู ุงูููุญุณูู (Clustered)
- **ุงูุญุฏ ุงูุฃูุตู ููุงุชุตุงูุงุช ุงููุชุฒุงููุฉ**: ~8,000-16,000
- **ุงุณุชููุงู ุงูุฐุงูุฑุฉ**: ~0.5-1MB ููู ุงุชุตุงู (ุชุญุณู 50%)
- **ูุนุฏู ุงูุฑุณุงุฆู**: ~2,000-5,000 ุฑุณุงูุฉ/ุซุงููุฉ
- **ุงุณุชุบูุงู CPU**: ุฌููุน ุงูููู ุงููุชุงุญุฉ

## ๐ ุฎุทูุงุช ุงูุชุดุบูู

### 1. ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ

```powershell
# ุชุซุจูุช ููุชุจุงุช ุงูุฃุฏุงุก ูุงูููุงุณุชุฑููุฌ
npm install @socket.io/redis-adapter ioredis pm2 --save

# ุชุซุจูุช ุฃุฏูุงุช ุงุฎุชุจุงุฑ ุงูุถุบุท
npm install autocannon artillery k6 --save-dev

# ุชุซุจูุช ููุชุจุงุช ุฅุถุงููุฉ ูููุฑุงูุจุฉ
npm install socket.io-client axios --save-dev
```

### 2. ุชุดุบูู Redis (ูุทููุจ ููููุงุณุชุฑููุฌ)

```powershell
# ุชุดุบูู Redis ุจุงุณุชุฎุฏุงู Docker
docker run -d --name redis-cluster -p 6379:6379 redis:alpine

# ุฃู ุชุดุบูู Redis ูุญููุงู ุฅุฐุง ูุงู ูุซุจุช
redis-server
```

### 3. ุชุดุบูู ุงููุธุงู ุงูููุญุณูู

```powershell
# ุชุดุบูู ุงููุธุงู ุงูููุญุณูู ูุน PM2 Clustering
pm2 start ecosystem.config.js

# ูุฑุงูุจุฉ ุงูุฃุฏุงุก ูู ุงูููุช ุงููุนูู
pm2 monit

# ุนุฑุถ ุงูุณุฌูุงุช
pm2 logs

# ุนุฑุถ ูุนูููุงุช ุงูุนูููุงุช
pm2 list
```

## ๐งช ุงุฎุชุจุงุฑุงุช ุงูุถุบุท ุงููุชุฏุฑุฌุฉ

### ุงุฎุชุจุงุฑ ุชุฏุฑูุฌู ุดุงูู (1K โ 5K โ 10K)

```powershell
# ุชุดุบูู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู ุงููุชุฏุฑุฌ
node advanced-load-test.js graduated
```

### ุงุฎุชุจุงุฑุงุช ูููุตูุฉ

```powershell
# ุงุฎุชุจุงุฑ HTTP API (100 ุงุชุตุงู ููุฏุฉ 30 ุซุงููุฉ)
node advanced-load-test.js http 100 30

# ุงุฎุชุจุงุฑ WebSocket (1000 ุงุชุตุงู ููุฏุฉ 60 ุซุงููุฉ)
node advanced-load-test.js websocket 1000 60

# ุงุฎุชุจุงุฑ ุงููุณุชุฎุฏููู ุงููุชุฒุงูููู (100 ูุณุชุฎุฏู ููุฏุฉ 60 ุซุงููุฉ)
node advanced-load-test.js users 100 60
```

### ุงุฎุชุจุงุฑ 10,000 ูุณุชุฎุฏู ูุชุฒุงูู

```powershell
# ุงุฎุชุจุงุฑ ุงูุญุฏ ุงูุฃูุตู - 10K ุงุชุตุงู WebSocket
node advanced-load-test.js websocket 10000 120

# ุงุฎุชุจุงุฑ 1000 ูุณุชุฎุฏู ุจุณููู ูุงูุนู
node advanced-load-test.js users 1000 180
```

## ๐ ูุฑุงูุจุฉ ุงูุฃุฏุงุก

### ูุฑุงูุจุฉ PM2

```powershell
# ูุฑุงูุจุฉ ุงูุฃุฏุงุก ุงูุชูุงุนููุฉ
pm2 monit

# ูุนูููุงุช ุชูุตูููุฉ ุนู ุงูุนูููุงุช
pm2 show accounts-store

# ุฅุนุงุฏุฉ ุชุดุบูู ุฅุฐุง ูุฒู ุงูุฃูุฑ
pm2 restart ecosystem.config.js

# ุฅููุงู ุงูุนูููุงุช
pm2 stop ecosystem.config.js
```

### ูุฑุงูุจุฉ ุงููุธุงู

```powershell
# ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู CPU ูุงูุฐุงูุฑุฉ
Get-Counter "\Processor(_Total)\% Processor Time" -SampleInterval 1 -MaxSamples 10

# ูุฑุงูุจุฉ ุงูุฐุงูุฑุฉ ุงููุณุชุฎุฏูุฉ
Get-Counter "\Memory\Available MBytes" -SampleInterval 1 -MaxSamples 10

# ูุฑุงูุจุฉ ุงุชุตุงูุงุช ุงูุดุจูุฉ
netstat -an | findstr :5000
```

## ๐ฏ ูุนุงููุฑ ุงูุฃุฏุงุก ุงููุชููุนุฉ

### ูู 1,000 ูุณุชุฎุฏู ูุชุฒุงูู
- **ุฒูู ุงูุงุณุชุฌุงุจุฉ**: < 100ms
- **ูุนุฏู ุงููุฌุงุญ**: > 99%
- **ุงุณุชููุงู ุงูุฐุงูุฑุฉ**: < 1GB ุฅุฌูุงูู
- **ุงุณุชุฎุฏุงู CPU**: < 50%

### ูู 5,000 ูุณุชุฎุฏู ูุชุฒุงูู
- **ุฒูู ุงูุงุณุชุฌุงุจุฉ**: < 200ms
- **ูุนุฏู ุงููุฌุงุญ**: > 98%
- **ุงุณุชููุงู ุงูุฐุงูุฑุฉ**: < 3GB ุฅุฌูุงูู
- **ุงุณุชุฎุฏุงู CPU**: < 70%

### ูู 10,000 ูุณุชุฎุฏู ูุชุฒุงูู
- **ุฒูู ุงูุงุณุชุฌุงุจุฉ**: < 300ms
- **ูุนุฏู ุงููุฌุงุญ**: > 95%
- **ุงุณุชููุงู ุงูุฐุงูุฑุฉ**: < 6GB ุฅุฌูุงูู
- **ุงุณุชุฎุฏุงู CPU**: < 80%

## โ๏ธ ุชุญุฐูุฑุงุช ูููุงุญุธุงุช ูููุฉ

### ูุจู ุงุฎุชุจุงุฑ 10K ูุณุชุฎุฏู:

1. **ุชุฃูุฏ ูู ููุงุฑุฏ ุงููุธุงู**:
   - RAM: ูููุถู 8GB ุฃู ุฃูุซุฑ
   - CPU: 4 ููู ุฃู ุฃูุซุฑ
   - SSD: ูุฃุฏุงุก ุฃูุถู ููุงุนุฏุฉ ุงูุจูุงูุงุช

2. **ุฅุนุฏุงุฏุงุช ุงููุธุงู**:
   ```powershell
   # ุฒูุงุฏุฉ ุญุฏ ุงููููุงุช ุงูููุชูุญุฉ (ูู Linux/Mac)
   ulimit -n 65536
   
   # ูู Windows - ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช ุงูุฌุฏุงุฑ ุงููุงุฑู
   New-NetFirewallRule -DisplayName "Node.js" -Direction Inbound -Protocol TCP -LocalPort 5000 -Action Allow
   ```

3. **ูุฑุงูุจุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช**:
   - ุชุฃูุฏ ูู ุฃู MongoDB ุชุนูู ุจููุงุกุฉ
   - ุฑุงูุจ ุงูุงุชุตุงูุงุช: `db.serverStatus().connections`
   - ุชุญูู ูู ุงูููุงุฑุณ: `db.chats.getIndexes()`

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง

1. **"ECONNREFUSED" ุนูุฏ ุงูุงุชุตุงู ุจู Redis**:
   ```powershell
   # ุชุญูู ูู ุชุดุบูู Redis
   redis-cli ping
   # ูุฌุจ ุฃู ุชุฑุฌุน "PONG"
   ```

2. **"Too many open files"**:
   ```powershell
   # ูู Windows - ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุฉ
   pm2 restart ecosystem.config.js
   ```

3. **ุจุทุก ูู ุงูุงุณุชุฌุงุจุฉ**:
   ```powershell
   # ุชุญูู ูู ุงุณุชุฎุฏุงู CPU ูุงูุฐุงูุฑุฉ
   pm2 monit
   
   # ุชุญูู ูู MongoDB
   mongosh --eval "db.serverStatus().connections"
   ```

4. **ุงููุทุงุน ุงูุงุชุตุงูุงุช**:
   ```powershell
   # ุชุญูู ูู ุณุฌูุงุช PM2
   pm2 logs --lines 50
   
   # ุฅุนุงุฏุฉ ุชุดุบูู ุฅุฐุง ูุฒู ุงูุฃูุฑ
   pm2 restart all
   ```

## ๐ ุชุญุณููุงุช ุฅุถุงููุฉ ููุฅูุชุงุฌ

### 1. Load Balancer ุฎุงุฑุฌู
```nginx
upstream accounts_store {
    least_conn;
    server 127.0.0.1:5000;
    server 127.0.0.1:5001;
    server 127.0.0.1:5002;
    server 127.0.0.1:5003;
}
```

### 2. ูุฑุงูุจุฉ ูุชูุฏูุฉ
- **Prometheus + Grafana** ูููุชุงุจุนุฉ
- **New Relic** ุฃู **DataDog** ูููุฑุงูุจุฉ ุงูุณุญุงุจูุฉ
- **ELK Stack** ูุชุญููู ุงูุณุฌูุงุช

### 3. ูุณุฎ ุงุญุชูุงุทู ููุจูุงูุงุช
```powershell
# ูุณุฎ ุงุญุชูุงุทู ูููู ูู MongoDB
mongodump --out ./backups/$(Get-Date -Format "yyyy-MM-dd")
```

## โ ูุงุฆูุฉ ุงูุชุญูู ูุจู ุงูุฅูุชุงุฌ

- [ ] Redis ูุนูู ูููุจู ุงูุงุชุตุงูุงุช
- [ ] MongoDB ูุญุณูู ุจุงูููุงุฑุณ ุงููุทููุจุฉ
- [ ] PM2 ูููู ุจุดูู ุตุญูุญ
- [ ] ุงุฎุชุจุงุฑุงุช ุงูุถุบุท ูุฌุญุช ูู 1K ูุณุชุฎุฏู
- [ ] ุงุฎุชุจุงุฑุงุช ุงูุถุบุท ูุฌุญุช ูู 5K ูุณุชุฎุฏู
- [ ] ุงุฎุชุจุงุฑุงุช ุงูุถุบุท ูุฌุญุช ูู 10K ูุณุชุฎุฏู
- [ ] ูุฑุงูุจุฉ ุงูุฃุฏุงุก ุชุนูู ุจุดูู ุตุญูุญ
- [ ] ุฅุนุฏุงุฏุงุช ุงูุฃูุงู ููุนูุฉ
- [ ] ุงููุณุฎ ุงูุงุญุชูุงุทู ูุฌุฏูู

## ๐ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุชุทุจูู ูุฐู ุงูุชุญุณููุงุชุ ุงููุธุงู ุณูููู ูุงุฏุฑ ุนูู:
- **ุฏุนู 10,000+ ูุณุชุฎุฏู ูุชุฒุงูู**
- **ูุนุงูุฌุฉ 5,000+ ุฑุณุงูุฉ/ุซุงููุฉ**
- **ุงูุญูุงุธ ุนูู ุฒูู ุงุณุชุฌุงุจุฉ < 300ms**
- **ุงุณุชูุฑุงุฑ ุนุงูู ูุน ูุนุฏู ูุฌุงุญ > 95%**

ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุฅูุชุงุฌ ูููููู ุงูุชุนุงูู ูุน ุงูุถุบุท ุงููุทููุจ! ๐